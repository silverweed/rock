<!DOCTYPE html>
<html>
    <head>
        <title>Rock Interpreter</title>
        <link rel='stylesheet' href='style.css'/>
        <script src='rock.js'></script>
    </head>
    <body>
        <div id='headerwrapper'>
            <div id='buttons'>
                <button id='exe' onclick='exe()'>Execute</button>
                <button id='clear' onclick='clearOut()'>Clear</button>
                <input onchange='verbAdj()' type='range' min="0" max="3" value="0" id='verb'/>
                <label for='verb' id='verblb'>Verbosity: 0</label>
            </div>
            <div id='titlewrapper'>
                <h1>Try Rock!</h1>
                <h4>v2.0 - <a href='https://github.com/silverweed/rock'>Hosted on GitHub</a></h4>
            </div>
        </div>
        <div id='wrapper'>
            <div id='codewrapper'>
                <textarea id='code' spellcheck='false'>
-- Example Rock program
-- Print all primes up to limit.

limit := 1000
i := 2
p := " is prime

-- main loop
loop:
    call is_prime i
    jumpif noprint $res is False
    say i .. p
noprint:
    jumpif end i == limit
    i = i + 1
    jump loop
end:
    die

-- returns true if n is prime, false otherwise.
is_prime: n
    -- square root of n
    jumpif is_prime_true n is 2
    lim := n ^ 0.5
    lim = floor lim
    lim = lim + 1
    i := 2
is_prime_loop:
    tmp := n % i
    jumpif is_prime_false tmp is 0
    jumpif is_prime_true i == lim
    i = i + 1
    jump is_prime_loop
is_prime_false:
    return False
is_prime_true:
    return True
                </textarea>
            </div>
            <div id='output'></div>
        </div>
        <script>
        var $code = document.getElementById('code');
        var $out = document.getElementById('output');
        var verb = document.getElementById('verb');
        var verblb = document.getElementById('verblb');
        function exe() {
            clearOut();
            executeRock($code.value);
        }
        function clearAll() {
            clearCode();
            clearOut();
        }
        function clearOut() {
            $out.innerHTML = "";
        }
        function clearCode() {
            $code.value = "";
        }
        function verbAdj() {
            $debuglv = verb.value;
            verblb.innerHTML = "Verbosity: " + $debuglv;
        }
        </script>
    </body>
</html>
